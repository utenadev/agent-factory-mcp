# AST Grep リファレンス資料

> コード検索・置換ツール ast-grep の参考資料
> 作成日: 2026-01-31

## 概要

ast-grep (sg) は、AST (Abstract Syntax Tree) を使ったコード検索・置換ツールです。
正規表現ベースの検索よりも正確で、構造的なコード変更に適しています。

## 参考URL

### 1. チートシート / サンプル集
- **URL**: https://zenn.dev/chot/articles/0f99c8c7c7afe5
- **内容**: ast-grepの基本構文、パターンの書き方、便利なサンプル集
- **用途**: 構文の検索、カスタムルールの作成時の参考

### 2. 実践的な使い方
- **URL**: https://zenn.dev/makotot/articles/ea823805582e5c
- **内容**: 実際のコードベースでの活用例、ベストプラクティス
- **用途**: リファクタリング、コードベース全体の一貫性確保

### 3. パターン集 (Gist)
- **URL**: https://gist.github.com/masakielastic/a82375bd55266a44bc1a386f19d7522b
- **内容**: よく使うパターンのスニペット集
- **用途**: 特定の構造にマッチするパターンのコピー＆ペースト

## 活用場面

### リファクタリング時
- 関数のシグネチャ変更
- APIパターンの移行
- 命名規則の統一

### コードレビュー支援
- アンチパターンの検出
- セキュリティ問題のパターン検索
- パフォーマンス問題の特定

### テスト作成支援
- 類似テストパターンの検索
- テストカバレッジの盲点特定
- モックパターンの統一

## 基本コマンド例

```bash
# 検索
sg -p 'console.log($MSG)' -l ts

# 置換（dry-run）
sg -p 'console.log($MSG)' -r 'logger.info($MSG)' -l ts --dry-run

# 設定ファイル付き実行
sg -c sgconfig.yml
```

## プロジェクトでの活用予定

将来的な以下の場面で活用予定：
1. 大規模なAPI変更時
2. テストパターンの統一
3. コードベース全体のリファクタリング

## 関連ツール

- **ripgrep (rg)**: 高速なテキスト検索（正規表現ベース）
- **ast-grep (sg)**: ASTベースの構造的検索・置換
- **Biome**: リンター・フォーマッター（このプロジェクトで使用中）

## 備考

- 本プロジェクトでは現在Biomeを使用
- ast-grepは複雑な構造変更時の補助ツールとして検討
- テスト作成時には特に使用せず（シンプルなテストのため）
