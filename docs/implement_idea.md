# AIエージェントCLIツールの動的サポート仕様

## 概要
CLIツールの `--help` 出力を解析し、その結果に基づいて動的にツール定義を生成する仕組み。これにより、多数のAIエージェントに対応するMCPサーバーを効率的に構築可能。

## アーキテクチャ

### 1. ヘルプ出力解析モジュール
- 各AIエージェントCLIの `--help` オプションを実行
- 出力から以下の情報を抽出：
  - 利用可能なオプション（フラグ、引数）
  - 各オプションの説明文
  - 必須/任意のパラメータ
  - 引数のデータ型（文字列、数値、真偽値等）
  - オプションのグループ化情報

### 2. メタデータスキーマ
解析結果を標準化されたスキーマで保存：
```json
{
  "agentName": "openai-cli",
  "version": "1.0.0",
  "options": [
    {
      "name": "model",
      "alias": ["-m"],
      "type": "string",
      "required": false,
      "description": "使用するモデル名",
      "defaultValue": "gpt-4"
    },
    {
      "name": "temperature",
      "alias": ["-t"],
      "type": "number",
      "required": false,
      "description": "温度パラメータ",
      "range": [0.0, 2.0]
    }
  ]
}
```

### 3. 動的ツール定義生成器
- メタデータスキーマに基づいてZodスキーマを動的に生成
- MCPツール定義を自動生成
- 各オプションに対応するUI/フォーム要素を生成

### 4. 実行エンジン
- 共通の実行インターフェースを提供
- ツール呼び出し時にCLIコマンドを構築・実行
- エラー処理と進捗通知を統一的に管理

## 処理フロー

1. **初期設定フェーズ**:
   - 対応したいAIエージェントのCLIパスを指定
   - 各CLIに対して `--help` を実行し、出力を解析
   - メタデータをJSONファイルとして保存

2. **実行時処理**:
   - ユーザーが特定のAIエージェントを選択
   - 対応するメタデータからツール定義を動的に生成
   - MCPプロトコルに従ってクライアントに提供
   - ユーザー入力に基づきCLIコマンドを構築・実行

## 拡張性

### 新しいAIエージェントの追加手順
1. CLIツールのパスを設定
2. `--help` 出力の解析（1回のみ）
3. メタデータファイルの生成
4. 設定ファイルに追加

### カスタマイズポイント
- ヘルプ出力の解析ルール（正規表現、パーサー）
- データ型のマッピングルール
- デフォルト値の設定方法
- オプションのグルーピング方法

## 利点

- **迅速な対応**: 新しいAIエージェントがリリースされた際に、最小限の作業で対応可能
- **保守性**: 各AIエージェント固有のコードが最小限に抑えられる
- **一貫性**: すべてのAIエージェントに対して統一されたUI/UXを提供
- **スケーラビリティ**: 数十種類のAIエージェントに対応してもコードの複雑性が増加しない

## 技術的要件

- CLIツールが標準的な `--help` 出力を提供すること
- 出力形式が解析可能であること（テキスト、JSONなど）
- 各オプションが明確に定義されていること