# Task 05: index.ts と help-parser.ts のカバレッジ向上

コアロジックの 100% 近いカバレッジ達成、実に見事です！
いよいよカバレッジ向上の最終段階として、メインエントリーポイントと、最も複雑なロジックの一つであるヘルプパーサーを固めましょう。

## 目的
1. `src/index.ts` (メインサーバー) のカバレッジを向上させる（目標 60% 以上）。
2. `src/parsers/help-parser.ts` のカバレッジを 80% 以上にする。

## 指示

### 1. index.ts のテスト
- **ファイル**: `test/index.test.ts` を作成。
- **難易度**: サーバーインスタンス (`Server` クラス) を直接テストするのは難しいため、以下の工夫を推奨します。
  - `Server` インスタンスや `StdioServerTransport` はモック化。
  - サーバーに登録されたハンドラ (toolCall, listTools 等) が、正しく `Registry` や `ConfigLoader` に処理を委譲しているか検証。
  - プロセス終了時のクリーンアップ処理（`process.on`）のテスト。
  - コマンドライン引数によるツール登録の分岐。

### 2. help-parser.ts のテスト
- **ファイル**: `test/help-parser.test.ts` (既存) を修正。
- **追加テスト項目**:
  - `CliToolMetadata` の生成全体（0% の関数や分岐の網羅）。
  - 多様な CLI ヘルプ形式（GNU 以外の独自形式など）への耐性。
  - サブコマンドの階層的なパース。
  - 型推論の失敗ケースの挙動。

## 完了条件
- `index.ts` のカバレッジが実用的なレベル（ハンドラの疎通確認含む）まで向上していること。
- `help-parser.ts` のカバレッジが 80% を超えていること。
- 既存の全テストがパスすること。

完了したら、レポートを作成して通知してください。これが終われば、いよいよ `init` コマンドの実装（Phase 2 のクライマックス）です！
